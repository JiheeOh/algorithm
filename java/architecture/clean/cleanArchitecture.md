## What is Clean Architecture?

### Main Concept 
1. 관심사의 분리 
- 계층 간의 분리는 기본 : 모든 아키텍처 설계의 목표 
- 여기에 Layered Architecture의 단점을 보완 


2. `도메인을 보호하자`가 주된 차이 
- 기존 Layered Architecture 단점 : 비즈니스 계층이 영속성 계층에 의존
  -  영속성 계층이 변경되면 비즈니스 계층, 즉 핵심 도메인 계층도 변화해야함 
  - 그런데 핵심 도메인 계층은 잘 변하지 않고 비즈니스 상 중요한 컴포넌트들이 많은데..? 이거 좀 위험하지 않나?
  - presentation 계층 > business 계층 >  database 계층 으로 흘러가는 의존성의 흐름이 마음에 안들어..

    
- 의존성의 흐름을 바꿔버리자! interface를 가지고
  -  presentation 계층 > domain 계층 < database 계층으로 의존성을 역전시켜버리자 
  - 그러면 database에 변경이 생겨도 domain 계층의 컴포넌트들은 변경하지 않아도 된다.


- 도메인 코드가 아는 것 ? 아무것도 없어 비즈니스 규칙말고는 
  - 어떤 영속성 프레임워크를 쓰는지 어떤 외부 interface가 있는지 모른다. 
  - interface만 가지고 있을 뿐, 그 interface의 구현체는 다른 계층이 가지고 있다.
  
![스크린샷 2024-11-01 오전 12.14.44.png](%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202024-11-01%20%EC%98%A4%EC%A0%84%2012.14.44.png)
 

3. 그래서 어떻게 구조를 짤까? 
- 패키지 구조 
![스크린샷 2024-11-05 오전 12.33.46.png](%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202024-11-05%20%EC%98%A4%EC%A0%84%2012.33.46.png)


- 여기서 치뤄야할 대가 
  - 도메인 계층은 영속성 계층을 모르기 때문에 영속성 계층의 Entity를 그대로 쓸 수 없다. 
  - 두 계층에 가각의 엔티티를 만들어서 서로 변환해야한다.
  - 이는 도메인 계층과 다른 계층들 사이에서도 마찬가지 
  - 이렇게 만들어야 정석이다 
  - ![스크린샷 2024-11-05 오전 12.52.22.png](%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202024-11-05%20%EC%98%A4%EC%A0%84%2012.52.22.png)